{% extends "base.html" %}
{% block title %}Home{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="bg-navy-900 text-white py-20 px-4 relative overflow-hidden">
    <div class="absolute inset-0 opacity-5">
        <svg class="w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0 50 Q25 30 50 50 Q75 70 100 50 L100 100 L0 100Z" fill="white"/></svg>
    </div>
    <div class="max-w-5xl mx-auto text-center relative z-10">
        <div class="inline-block border border-gold/40 rounded-full px-4 py-1 text-gold text-sm tracking-wide uppercase mb-6">
            EMS Week &middot; May 17&ndash;23, 2026
        </div>
        <h1 class="font-serif text-4xl md:text-6xl font-bold mb-6">New Hampshire<br>CPR Challenge</h1>
        <p class="text-xl md:text-2xl text-navy-200 mb-4 max-w-3xl mx-auto leading-relaxed">
            All five Executive Council districts are competing to train <strong class="text-gold">{{ "{:,}".format(goal) }}</strong> Granite Staters in life-saving CPR.
        </p>
        {% if total > 0 %}
        <div class="my-10">
            <span class="text-5xl md:text-7xl font-bold text-gold font-serif">{{ "{:,}".format(total) }}</span>
            <span class="block text-navy-300 text-sm mt-2 uppercase tracking-wider">people trained statewide</span>
        </div>
        {% else %}
        <div class="my-10">
            <span class="block text-navy-300 text-sm uppercase tracking-wider">Trainings coming soon &mdash; May 17&ndash;23, 2026</span>
        </div>
        {% endif %}
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a href="{{ url_for('trainings') }}" class="inline-flex items-center justify-center gap-2 bg-gold hover:bg-gold-dark text-navy-900 font-bold py-3 px-8 rounded-lg text-lg transition">
                <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                Find a Training
            </a>
            <a href="{{ url_for('host') }}" class="inline-flex items-center justify-center gap-2 border-2 border-white/30 hover:border-white hover:bg-white/10 text-white font-bold py-3 px-8 rounded-lg text-lg transition">
                <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12h14"/></svg>
                Host a Free Training
            </a>
        </div>
    </div>
</section>

<!-- What is Hands-Only CPR -->
<section class="py-16 px-4">
    <div class="max-w-5xl mx-auto">
        <h2 class="font-serif text-3xl font-bold text-center text-navy-900 mb-12">Hands-Only CPR: Two Steps That Save Lives</h2>
        <div class="grid md:grid-cols-2 gap-8 max-w-3xl mx-auto">
            <div class="bg-white rounded-xl shadow-sm p-8 text-center border-t-4 border-cpr-red">
                <div class="mx-auto mb-4 w-16 h-16 rounded-full bg-cpr-light flex items-center justify-center">
                    <svg class="w-8 h-8 text-cpr-red" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                    </svg>
                </div>
                <h3 class="text-xl font-bold text-navy-900 mb-2">Step 1: Call 911</h3>
                <p class="text-gray-600">If you see a teen or adult suddenly collapse, call 911 right away or tell someone nearby to call.</p>
            </div>
            <div class="bg-white rounded-xl shadow-sm p-8 text-center border-t-4 border-cpr-red">
                <div class="mx-auto mb-4 w-16 h-16 rounded-full bg-cpr-light flex items-center justify-center">
                    <svg class="w-8 h-8 text-cpr-red" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/>
                    </svg>
                </div>
                <h3 class="text-xl font-bold text-navy-900 mb-2">Step 2: Push Hard &amp; Fast</h3>
                <p class="text-gray-600">Push hard and fast in the center of the chest at 100&ndash;120 compressions per minute. Don't stop until help arrives.</p>
            </div>
        </div>
        <p class="text-center text-gray-500 mt-8 max-w-2xl mx-auto">
            More than <strong>350,000 cardiac arrests</strong> occur outside hospitals each year. Bystander CPR can <strong>double or triple</strong> a victim's chance of survival.
        </p>
    </div>
</section>

<!-- District Scoreboard -->
{% if total > 0 %}
<section class="py-16 px-4 bg-navy-50">
    <div class="max-w-6xl mx-auto">
        <h2 class="font-serif text-3xl font-bold text-center text-navy-900 mb-4">District Scoreboard</h2>
        <p class="text-center text-gray-600 mb-10">Which Executive Council district will train the most people?</p>
        <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
            {% for d in range(1, 6) %}
            <div class="bg-white rounded-xl shadow-sm p-5 text-center hover:shadow-md transition border border-gray-100">
                <div class="w-4 h-4 rounded-full mx-auto mb-2" style="background-color: {{ district_colors[d] }}"></div>
                <p class="text-sm text-gray-500">District {{ d }}</p>
                <p class="font-bold text-navy-900 text-sm">{{ councilors[d]['name'] }}</p>
                <p class="text-3xl font-bold mt-2 font-serif" style="color: {{ district_colors[d] }}">{{ "{:,}".format(district_counts.get(d, 0)) }}</p>
                <p class="text-xs text-gray-400 uppercase tracking-wide">trained</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- How It Works -->
<section class="py-16 px-4">
    <div class="max-w-5xl mx-auto">
        <h2 class="font-serif text-3xl font-bold text-center text-navy-900 mb-12">How It Works</h2>
        <div class="grid md:grid-cols-3 gap-8">
            <div class="text-center">
                <div class="bg-navy-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="w-7 h-7 text-navy-700" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
                </div>
                <h3 class="font-bold text-navy-900 mb-2">Find a Training</h3>
                <p class="text-gray-600">Browse our interactive map to find a free Hands-Only CPR training near you during EMS Week.</p>
            </div>
            <div class="text-center">
                <div class="bg-navy-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="w-7 h-7 text-navy-700" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                </div>
                <h3 class="font-bold text-navy-900 mb-2">Attend (15&ndash;20 min)</h3>
                <p class="text-gray-600">Show up and learn the two life-saving steps of Hands-Only CPR. No experience needed. Completely free.</p>
            </div>
            <div class="text-center">
                <div class="bg-navy-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="w-7 h-7 text-navy-700" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><path d="m9 15 2 2 4-4"/></svg>
                </div>
                <h3 class="font-bold text-navy-900 mb-2">Get Your Certificate</h3>
                <p class="text-gray-600">Receive a downloadable certificate of participation and help your district win the CPR Challenge.</p>
            </div>
        </div>
    </div>
</section>

<!-- Keep Me Updated -->
<section class="py-12 px-4 bg-white border-t border-gray-100">
    <div class="max-w-3xl mx-auto">
        <div class="bg-navy-50 rounded-xl p-6 border border-navy-100">
            <h3 class="font-serif font-bold text-navy-900 text-lg mb-1 text-center">Stay Updated</h3>
            <p class="text-sm text-gray-600 mb-4 text-center">Get notified when free CPR trainings are posted in your Executive Council district.</p>
            <form method="POST" action="{{ url_for('subscribe') }}" class="flex flex-col sm:flex-row gap-3 max-w-xl mx-auto">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <input type="email" name="email" required placeholder="Your email address" class="flex-1 border border-gray-300 rounded-lg px-4 py-2 text-sm focus:ring-2 focus:ring-navy-500 focus:border-navy-500">
                <select name="district" class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-navy-500 focus:border-navy-500">
                    <option value="">Any district</option>
                    {% for d in range(1, 6) %}
                    <option value="{{ d }}">District {{ d }} &mdash; {{ councilors[d]['name'] }}</option>
                    {% endfor %}
                </select>
                <button type="submit" class="bg-navy-900 text-white px-5 py-2 rounded-lg text-sm font-bold hover:bg-navy-800 transition whitespace-nowrap">Notify Me</button>
            </form>
        </div>
    </div>
</section>

<!-- Upcoming Trainings Preview -->
{% if upcoming %}
<section class="py-16 px-4 bg-white border-t border-gray-100">
    <div class="max-w-5xl mx-auto">
        <h2 class="font-serif text-3xl font-bold text-center text-navy-900 mb-10">Upcoming Trainings</h2>
        <div class="grid md:grid-cols-3 gap-6">
            {% for t in upcoming %}
            <div class="border border-gray-200 rounded-xl p-6 hover:shadow-md transition">
                <div class="flex items-center gap-2 mb-3">
                    <span class="w-3 h-3 rounded-full" style="background-color: {{ district_colors[t.district] }}"></span>
                    <span class="text-sm text-gray-500">District {{ t.district }}</span>
                </div>
                <h3 class="font-bold text-navy-900">{{ t.location_name }}</h3>
                <p class="text-gray-600 text-sm mt-1">{{ t.date.strftime('%A, %B %d') }} &middot; {{ t.start_time or 'TBD' }}</p>
                <p class="text-gray-500 text-sm">{{ t.city or '' }}</p>
                <div class="mt-4 flex justify-between items-center">
                    <span class="text-sm text-gray-400">{{ t.spots_remaining }} spots left</span>
                    <a href="{{ url_for('rsvp', training_id=t.id) }}" class="bg-navy-900 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-navy-800 transition">RSVP</a>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="text-center mt-8">
            <a href="{{ url_for('trainings') }}" class="text-navy-700 font-semibold hover:text-navy-900 transition">View all trainings &rarr;</a>
        </div>
    </div>
</section>
{% endif %}

<!-- The 5 Councilors -->
<section class="py-16 px-4 bg-navy-50">
    <div class="max-w-5xl mx-auto">
        <h2 class="font-serif text-3xl font-bold text-center text-navy-900 mb-4">The Executive Council</h2>
        <p class="text-center text-gray-600 mb-10">All five councilors are working together to bring free CPR training to every corner of New Hampshire.</p>
        <div class="grid grid-cols-2 md:grid-cols-5 gap-6">
            {% for d in range(1, 6) %}
            <div class="text-center">
                <img src="{{ councilors[d]['photo'] }}" alt="{{ councilors[d]['name'] }}" class="w-20 h-20 rounded-full mx-auto mb-3 object-cover border-2 border-white shadow-md">
                <p class="font-bold text-navy-900 text-sm">{{ councilors[d]['name'] }}</p>
                <p class="text-xs text-gray-500">District {{ d }}</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- CTA -->
<section class="bg-cpr-red text-white py-14 px-4">
    <div class="max-w-3xl mx-auto text-center">
        <h2 class="font-serif text-2xl md:text-3xl font-bold mb-4">Ready to Save a Life?</h2>
        <p class="text-lg mb-8 opacity-90">It takes just 15 minutes to learn Hands-Only CPR. Find a training and help your district win the challenge.</p>
        <a href="{{ url_for('trainings') }}" class="inline-flex items-center gap-2 bg-white text-cpr-red font-bold py-3 px-8 rounded-lg text-lg hover:bg-gray-100 transition">
            <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
            Find a Training
        </a>
    </div>
</section>
{% endblock %}
